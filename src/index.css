@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Base mínima sobre blanco ===== */
@layer base {
  * { @apply border-transparent; }

  body {
    @apply bg-white text-slate-900 font-sans antialiased;
    background:#fff;
  }
}

/* ===== Header centrado (texto simple) ===== */
.header-top {
  @apply fixed left-1/2 -translate-x-1/2 top-3 z-30 text-center;
}
.header-top h2 {
  @apply text-slate-600 text-sm font-semibold;
}
.header-top p {
  @apply text-slate-400 text-[11px] mt-0.5;
}

/* ===== Fade superior para que los primeros mensajes no queden pegados ===== */
.top-fade {
  position: fixed;
  top: 48px;
  left: 0; right: 0;
  height: 90px;
  pointer-events: none;
  background: linear-gradient(to bottom, rgba(255,255,255,1), rgba(255,255,255,0));
  z-index: 5;
}

/* ===== Burbujas (la versión previa) ===== */
.bubble {
  position: relative;
  box-shadow:
    0 10px 24px -12px rgba(2, 6, 23, 0.18),
    0 4px 10px -6px rgba(2, 6, 23, 0.10);
  backdrop-filter: saturate(1.05);
}
.bubble-ai { background: #ECECF3; color:#0f172a; border-radius: 1rem; }
.bubble-user { background: #ffffff; color:#0f172a; border-radius: 1rem; border:1px solid #e5e7eb; }

/* Anim de entrada */
.msg-in { animation: msg-in .34s cubic-bezier(.22,.61,.36,1); }
@keyframes msg-in {
  0% { opacity:0; transform: translateY(6px) scale(.98); filter: blur(1px); }
  100%{ opacity:1; transform:none; filter: blur(0); }
}
/* Sheen suave al montar (la de siempre) */
.bubble .bubble-sheen {
  content:"";
  position:absolute; inset:0; pointer-events:none;
  background: linear-gradient(120deg, rgba(255,255,255,0) 30%, rgba(255,255,255,0.45) 50%, rgba(255,255,255,0) 70%);
  transform: translateX(-120%);
  animation: sheen 1.1s ease-out 120ms forwards;
  opacity:.6; mix-blend-mode: screen;
}
@keyframes sheen { to { transform: translateX(120%); opacity:0; } }

/* ===== Overlay “Pensando…” (cuadro cuadrado) con aurora D8AADB/9297DB/CCC9DC ===== */
.thinking-overlay{
  position: fixed; inset: 0; z-index: 40;
  display:flex; justify-content:center; align-items:flex-start;
  padding-top: clamp(36px, 10vh, 110px);
  pointer-events:none;
}
.thinking-card{
  --think-size: min(260px, 80vw);
  position: relative;
  width: var(--think-size);
  height: var(--think-size);
  padding: 18px;
  border-radius: 24px;
  background: rgba(255,255,255,.96);
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
  border: 1px solid rgba(15,23,42,.06);
  box-shadow:
    0 34px 80px -28px rgba(146,151,219,0.42),
    0 10px 24px -12px rgba(2,6,23,0.20);
  animation: think-pop 260ms cubic-bezier(.22,.61,.36,1) both;
}
@keyframes think-pop{
  0% { opacity:0; transform: translateY(8px) scale(.96); filter: blur(2px); }
  100%{ opacity:1; transform:none; filter: blur(0); }
}
.thinking-title{ @apply text-sm font-semibold text-slate-700 text-center select-none; }
.thinking-sub  { @apply text-[11px] text-slate-500 text-center select-none mt-1; }

.thinking-aurora{
  position:absolute; inset:-18%;
  filter: blur(90px) saturate(2.2) contrast(1.2) brightness(1.08);
  opacity: 1; pointer-events:none; z-index:0;
}
.thinking-aurora .blob{ position:absolute; width:60%; height:60%; border-radius:50%; }
.thinking-aurora .a{
  left:-6%; top:-8%;
  background: radial-gradient(closest-side, rgba(216,170,219,1), rgba(216,170,219,0) 72%);
  animation: a-move 7s ease-in-out infinite alternate;
}
.thinking-aurora .b{
  right:-8%; top:8%;
  background: radial-gradient(closest-side, rgba(146,151,219,.98), rgba(146,151,219,0) 72%);
  animation: b-move 8.5s ease-in-out infinite alternate;
}
.thinking-aurora .c{
  left:16%; bottom:-14%; width:68%; height:68%;
  background: radial-gradient(closest-side, rgba(204,201,220,.96), rgba(204,201,220,0) 74%);
  animation: c-move 9s ease-in-out infinite alternate;
}
.thinking-aurora::after{
  content:""; position:absolute; inset:-22%;
  background: conic-gradient(from 0deg,
    rgba(216,170,219,.70), rgba(146,151,219,.60), rgba(204,201,220,.70), rgba(216,170,219,.70));
  filter: blur(120px) saturate(1.9) brightness(1.08);
  opacity:.55; mix-blend-mode: screen;
  animation: swirl-rotate 16s linear infinite;
}
@keyframes a-move{ 0%{transform:translate(0,0)} 100%{transform:translate(8%,10%)} }
@keyframes b-move{ 0%{transform:translate(0,0)} 100%{transform:translate(-10%,8%)} }
@keyframes c-move{ 0%{transform:translate(0,0)} 100%{transform:translate(6%,-10%)} }
@keyframes swirl-rotate{ to{ transform: rotate(360deg);} }

/* ===== Input flotante ===== */
.chat-input-wrap{
  @apply fixed bottom-4 left-1/2 -translate-x-1/2 z-30 w-full max-w-4xl px-4;
}
.chat-input{
  @apply w-full bg-white/95 backdrop-blur border border-slate-200 rounded-2xl shadow-md px-3 py-2;
}
.chat-input textarea{
  @apply text-slate-900 placeholder:text-slate-400 leading-[1.4];
}
.icon-ghost { @apply text-slate-400; }  /* ícono adjuntar en gris */

/* Aviso centrado bajo el input */
.input-disclaimer{
  @apply mt-2 text-center text-[11px] text-slate-500 select-none;
}

/* Accesibilidad */
@media (prefers-reduced-motion: reduce){
  .msg-in, .thinking-card, .thinking-aurora::after, .thinking-aurora .blob { animation:none!important; }
}

/* ====== Bienvenida estilo poster (multilínea + degradado) ====== */
.welcome-poster{
  /* Paleta exacta */
  background-image: linear-gradient(
    95deg,
    #E0B89F 0%,
    #B55FDE 10%,
    #C48099 18%,
    #D967C9 28%,
    #E986BC 36%,
    #9751E7 45%,
    #EA6987 55%,
    #F6AEBC 64%,
    #85B4E2 74%,
    #5E2EF4 83%,
    #729EDD 92%,
    #D9679A 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  /* Composición de poster */
  display: inline-block;
  font-weight: 800;
  letter-spacing: -0.02em;
  line-height: .92;         /* compacto, como el ejemplo */
  white-space: pre-line;    /* respeta \n en el texto */
  background-size: 180% 180%;
  animation: poster-pan 10s ease-in-out infinite alternate;

  /* Pop/legibilidad sobre fondo claro */
  text-shadow:
    0 0 1px rgba(255,255,255,.35),
    0 10px 30px rgba(94,46,244,.16);
  filter:
    drop-shadow(0 8px 22px rgba(233,134,188,.18))
    drop-shadow(0 3px 8px rgba(0,0,0,.04));
}

/* Tallas responsivas para el poster */
.welcome-poster{ font-size: clamp(42px, 8vw, 96px); }

@keyframes poster-pan{
  0%   { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}