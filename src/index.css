@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Design System (HSL)
   ========================= */
@layer base {
  :root {
    /* Fondo global exacto solicitado */
    --background: 210 50% 7%;          /* #09121B */
    --foreground: 220 13% 98%;

    --card: 220 13% 12%;
    --card-foreground: 220 13% 98%;

    --popover: 220 13% 12%;
    --popover-foreground: 220 13% 98%;

    /* Acentos */
    --primary: 239 84% 67%;
    --primary-foreground: 220 13% 98%;
    --primary-glow: 250 84% 74%;

    --secondary: 220 13% 14%;
    --secondary-foreground: 220 13% 98%;

    --muted: 220 13% 16%;
    --muted-foreground: 220 9% 65%;

    --accent: 220 13% 18%;
    --accent-foreground: 220 13% 98%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 220 13% 98%;

    --border: 220 13% 20%;
    --input: 220 13% 16%;
    --ring: 239 84% 67%;

    /* Chat */
    --chat-user: 239 84% 67%;
    --chat-assistant: 220 13% 16%;
    --chat-input: 220 13% 14%;

    /* Gradients util */
    --gradient-primary: linear-gradient(135deg, hsl(239 84% 67%), hsl(250 84% 74%));
    --gradient-card: linear-gradient(145deg, hsl(220 13% 12% / 0.8), hsl(220 13% 14% / 0.8));
    --gradient-glow: radial-gradient(circle at 50% 50%, hsl(239 84% 67% / 0.15), transparent 50%);

    /* Sombra */
    --shadow-primary: 0 10px 30px -10px hsl(239 84% 67% / 0.3);
    --shadow-card: 0 8px 32px hsl(220 13% 3% / 0.4);
    --shadow-glow: 0 0 40px hsl(239 84% 67% / 0.2);

    /* Anim */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);

    --radius: 0.75rem;

    /* Sidebar (shadcn) */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .light {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 239 84% 67%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 239 84% 67%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * { @apply border-border; }

  body {
    @apply bg-background text-foreground font-sans antialiased;

    background-color: #09121B;

    background-image:
      linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.85) 0%,
        rgba(9, 18, 27, 1) 30%,
        rgba(9, 18, 27, 1) 100%
      ),
      var(--gradient-glow);

    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: hsl(var(--muted)); }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover { background: hsl(var(--primary) / 0.8); }

  /* Glass util */
  .glass {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    background: hsl(var(--card) / 0.8);
    border: 1px solid hsl(var(--border) / 0.5);
  }
  .glow { box-shadow: var(--shadow-glow); }
  .smooth { transition: var(--transition-smooth); }
}

/* ============================================================
   AURORA global (queda disponible; ya no la usamos en el chat)
   Paleta D8AADB ¬∑ 9297DB ¬∑ CCC9DC ‚Äî versi√≥n intensa
   ============================================================ */
.aurora-css {
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  opacity: 0.10;
  transition: opacity 900ms cubic-bezier(.22,.61,.36,1);
}
.aurora-css.is-active { opacity: 0.58; }

.aurora-css__layer {
  position: absolute;
  inset: -12%;
  filter: blur(72px) saturate(1.35) contrast(1.05) brightness(1.02);
  opacity: 1;
  mix-blend-mode: overlay;
  animation: layer-move-1 6s cubic-bezier(.4,0,.2,1) infinite alternate;
  will-change: transform, background-position, opacity, filter;
}
.aurora-css__layer--a {
  background:
    radial-gradient(44% 60% at 20% 30%, rgba(216,170,219,1)    0%, rgba(216,170,219,0) 60%),
    radial-gradient(50% 55% at 78% 40%, rgba(146,151,219,0.95) 0%, rgba(146,151,219,0) 62%),
    radial-gradient(50% 55% at 50% 75%, rgba(204,201,220,0.90) 0%, rgba(204,201,220,0) 68%);
  animation:
    layer-move-1 5.5s cubic-bezier(.4,0,.2,1) infinite alternate,
    shimmer-a 3.6s linear infinite;
}
.aurora-css__layer--b {
  background:
    conic-gradient(from 0deg   at 32% 50%, rgba(146,151,219,0.50), rgba(146,151,219,0) 65%),
    conic-gradient(from 180deg at 68% 42%, rgba(216,170,219,0.45), rgba(216,170,219,0) 65%);
  animation:
    layer-move-2 7s cubic-bezier(.4,0,.2,1) infinite alternate,
    rotate-soft 20s linear infinite,
    shimmer-b 4.0s linear infinite;
  opacity: 0.85;
}
.aurora-css__layer--c {
  background:
    radial-gradient(56% 62% at 60% 18%, rgba(204,201,220,0.70) 0%, rgba(204,201,220,0) 70%),
    conic-gradient(from 90deg at 40% 60%, rgba(216,170,219,0.45), rgba(216,170,219,0) 70%);
  animation:
    layer-move-3 6.2s cubic-bezier(.4,0,.2,1) infinite alternate,
    rotate-soft 24s linear infinite reverse,
    shimmer-c 3.4s linear infinite;
  opacity: 0.90;
}
.aurora-css__grain {
  position: absolute;
  inset: -6%;
  z-index: 1;
  pointer-events: none;
  opacity: 0.05;
  mix-blend-mode: overlay;
  animation: grain-pan 14s linear infinite;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.08) 0 1px, transparent 1px),
    radial-gradient(circle, rgba(0,0,0,.08) 0 1px, transparent 1px),
    radial-gradient(circle, rgba(255,255,255,.05) 0 1px, transparent 1px);
  background-size: 130px 130px, 190px 190px, 250px 250px;
  background-position: 0 0, 60px 30px, 90px 60px;
  filter: contrast(110%) brightness(103%);
}
.aurora-css__film {
  position: absolute;
  inset: -6%;
  z-index: 2;
  pointer-events: none;
  opacity: 0.02;
  mix-blend-mode: soft-light;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='220' height='220'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.95' numOctaves='4' stitchTiles='stitch'/></filter><rect width='100%%' height='100%%' filter='url(%23n)'/></svg>");
  background-size: 220px 220px;
  animation: film-jitter 2.2s steps(2,end) infinite;
}
.aurora-css__vignette {
  position: absolute;
  inset: -14%;
  z-index: 3;
  pointer-events: none;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.02) 60%, rgba(0,0,0,0.06) 90%, rgba(0,0,0,0.08) 100%);
  mix-blend-mode: multiply;
}

/* ===== Keyframes ===== */
@keyframes layer-move-1 {
  0%   { transform: translate(-18%, -6%) scale(1.02); }
  50%  { transform: translate(  6%, 10%) scale(1.06); }
  100% { transform: translate( 18%, -8%) scale(1.00); }
}
@keyframes layer-move-2 {
  0%   { transform: translate( 14%, -10%) scale(1.00); }
  50%  { transform: translate(-10%,  12%) scale(1.07); }
  100% { transform: translate(-22%,  -6%) scale(1.02); }
}
@keyframes layer-move-3 {
  0%   { transform: translate(-16%,  12%) scale(0.98); }
  50%  { transform: translate( 12%,  -8%) scale(1.06); }
  100% { transform: translate( 20%,   6%) scale(1.00); }
}
@keyframes rotate-soft { to { transform: rotate(360deg); } }
@keyframes shimmer-a { 0% { background-position: 0% 50%, 100% 50%, 50% 50%; } 100% { background-position: 100% 50%, 0% 50%, 50% 50%; } }
@keyframes shimmer-b { 0% { background-position: 0% 0%, 100% 100%; } 100% { background-position: 100% 100%, 0% 0%; } }
@keyframes shimmer-c { 0% { background-position: 50% 0%, 0% 50%; } 100% { background-position: 50% 100%, 100% 50%; } }
@keyframes grain-pan { 0% { background-position: 0 0, 60px 30px, 90px 60px; } 50% { background-position: 50px 25px, 110px 55px, 140px 95px; } 100% { background-position: 0 0, 60px 30px, 90px 60px; } }
@keyframes film-jitter { 0% { transform: translate(0,0); } 25% { transform: translate(-1%, 1%); } 50% { transform: translate(1%, -1%); } 75% { transform: translate(-1%, 2%); } 100% { transform: translate(0,0); } }

/* ============================================================
   Fondo de gradiente global muy suave (idle)
   ============================================================ */
.chat-glow-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  background: linear-gradient(
    -45deg,
    #49F1D7,
    #4BEBCF,
    #B2F0D9,
    #F3F7F6,
    #48F7E6,
    #49F1D7
  );
  background-size: 400% 400%;
  animation: gradient-move 8s ease infinite;
  opacity: 0.10;
  pointer-events: none;
}
@keyframes gradient-move {
  0%   { background-position:   0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position:   0% 50%; }
}

/* ===== Hero tweaks ===== */
.hero-badge { @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs bg-accent/40 border border-border/60; }
.text-glow-soft { text-shadow: 0 2px 18px hsl(var(--primary) / 0.18); }

/* ===== Anim de entrada para cada mensaje ===== */
.msg-in {
  animation: msg-in 380ms cubic-bezier(.22,.61,.36,1);
  transform-origin: var(--msg-origin, 100% 0);
}
@keyframes msg-in {
  0%   { opacity: 0; transform: translateY(6px) scale(0.98); filter: blur(2px); }
  60%  { opacity: 1; transform: translateY(0)   scale(1.00); filter: blur(0); }
  100% { opacity: 1; transform: translateY(0)   scale(1.00); }
}
.bubble {
  position: relative;
  overflow: hidden;
  box-shadow:
    0 10px 24px -12px rgba(2, 6, 23, 0.18),
    0 4px 10px -6px rgba(2, 6, 23, 0.10);
  backdrop-filter: saturate(1.05);
}
.bubble:hover {
  transform: translateY(-1px);
  box-shadow:
    0 14px 28px -12px rgba(2, 6, 23, 0.22),
    0 6px 12px -6px rgba(2, 6, 23, 0.12);
}
.bubble .bubble-sheen {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(120deg, rgba(255,255,255,0) 30%, rgba(255,255,255,0.45) 50%, rgba(255,255,255,0) 70%);
  transform: translateX(-120%);
  animation: sheen 1.1s ease-out 120ms forwards;
  opacity: 0.6;
  mix-blend-mode: screen;
}
@keyframes sheen { to { transform: translateX(120%); opacity: 0; } }

/* Accesibilidad */
@media (prefers-reduced-motion: reduce) {
  .msg-in { animation: none !important; }
  .bubble .bubble-sheen { animation: none !important; }
}

/* ===== Overlay y tarjeta ‚ÄúPensando‚Äù ‚Äî cuadrada, m√°s peque√±a y m√°s arriba ===== */
.thinking-overlay{
  position: absolute;
  inset: 0;
  z-index: 50;
  display: flex;
  justify-content: center;
  align-items: flex-start;                  /* la colocamos arriba */
  padding-top: clamp(40px, 12vh, 120px);    /* separada del borde */
  pointer-events: none;
  animation: overlay-in 160ms ease-out both;
}
@keyframes overlay-in { from{opacity:0} to{opacity:1} }

.thinking-card{
  --think-size: min(320px, 86vw);           /* üëà m√°s peque√±a */
  position: relative;
  width: var(--think-size);
  height: var(--think-size);                /* üëà CUADRADA */
  padding: 22px;
  border-radius: 24px;
  background: rgba(255,255,255,0.92);
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
  border: 1px solid rgba(0,0,0,0.06);
  box-shadow:
    0 40px 90px -28px rgba(146,151,219,0.50),
    0 12px 26px -10px rgba(2,6,23,0.18);
}
.animate-think-in{
  animation: think-pop 260ms cubic-bezier(.22,.61,.36,1) both;
}
@keyframes think-pop{
  0% { opacity:0; transform:translateY(10px) scale(.96); filter:blur(2px); }
  100%{ opacity:1; transform:translateY(0)   scale(1);   filter:blur(0); }
}

/* aurora interna ‚Äî un poco m√°s intensa */
.thinking-aurora{
  position: absolute;
  inset: -24%;
  filter: blur(110px) saturate(2.3) contrast(1.30) brightness(1.12);
  opacity: 1;
  z-index: 0;
  pointer-events: none;
}
.thinking-aurora .blob{ position:absolute; width:62%; height:62%; border-radius:50%; }
.thinking-aurora .blob.a{
  left:-6%; top:-8%;
  background: radial-gradient(closest-side, rgba(216,170,219,1), rgba(216,170,219,0) 72%);
  animation: float-a 7s ease-in-out infinite alternate;
}
.thinking-aurora .blob.b{
  right:-8%; top:8%;
  background: radial-gradient(closest-side, rgba(146,151,219,1), rgba(146,151,219,0) 72%);
  animation: float-b 9s ease-in-out infinite alternate;
}
.thinking-aurora .blob.c{
  left:18%; bottom:-14%; width:70%; height:70%;
  background: radial-gradient(closest-side, rgba(204,201,220,1), rgba(204,201,220,0) 74%);
  animation: float-c 8s ease-in-out infinite alternate;
}
@keyframes float-a{ 0%{transform:translate(0,0) scale(1)} 100%{transform:translate(6%,8%)  scale(1.06)} }
@keyframes float-b{ 0%{transform:translate(0,0) scale(1)} 100%{transform:translate(-8%,6%) scale(1.05)} }
@keyframes float-c{ 0%{transform:translate(0,0) scale(1)} 100%{transform:translate(4%,-6%) scale(1.07)} }